<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Title</title>
        <style>
            ul {
                padding: 0;
            }

            li {
                list-style: none;
                padding-bottom: 10px;
            }
            .content {
                width: 1024px;
            }

            .disp {
                height: 200px;
                border: 1px solid black;
            }

            .tab_host {
                display: flex;
                margin-top: 20px;
                text-align: center;
            }

            .tab:hover {
                cursor: pointer;
            }

            .tab {
                width: 200px;
                border: 1px solid #ededed;
            }

            #list {
                border: 1px solid #ededed;
            }
        </style>
    </head>
    <body>
        <p>
            4. 아래의 입력창에 숫자가 입력되지 않도록 하고 길이 제한은 10자로 하시오. <br />숫자가 입력된다면 숫자가
            입력되었다고 alert로 알려주시오
        </p>
        <input type="text" id="te_input" maxlength="10" placeholder="글자만 입력하세요." />
        <script>
            const $te_input = document.querySelector('#te_input');
            $te_input.addEventListener('keyup', (e) => {
                let value = e.target.value;
                if (parseInt(value[value.length - 1]) == value[value.length - 1]) {
                    alert('숫자를 입력하였습니다.');
                    e.target.value = '';
                }
            });
        </script>
        <p>
            5.아래의 입력창에 입력 후 저장 버튼을 누르거나 엔터키를 누르면 입력한 내용이 아래의 list에 추가 되도록
            하시오. <br />초기화 버튼을 누르면 list안의 모든 내용이 지워져야 함
        </p>
        <h5>6.추가된 내용을 "각 각" 수정 및 삭제 수 있게 변경하시오.</h5>
        <div>
            <form id="form">
                <input type="text" value="" width="600" id="list_data" name="content" />
                <button type="submit" id="send" value="show_view">저장</button>
                <button type="reset">초기화</button>
                <p>리스트</p>
                <ul id="list">
                    <li class="liclass">list</li>
                    <li class="liclass">list</li>
                </ul>
            </form>
        </div>
        <script>
            // 5.아래의 입력창에 입력 후 저장 버튼을 누르거나 엔터키를 누르면 입력한 내용이 아래의 list에 추가 되도록
            // 초기화 버튼을 누르면 list안의 모든 내용이 지워져야 함
            const $form = document.querySelector('#form');
            const $sendBtn = document.querySelector('#send');
            const $resetBtn = document.querySelector('button[type=reset]');
            let lists = [];

            window.onload = () => {
                renderList();
            };

            $form.addEventListener('submit', (e) => {
                e.preventDefault();
                if (e.target[0].value.trim() === '') {
                    alert('아무것도 입력하지 않았습니다.');
                    e.target[0].value = '';
                } else {
                    lists.push(e.target[0].value);
                    renderList();
                    e.target[0].value = '';
                }
            });
            const $ul = document.querySelector('#list');

            $resetBtn.addEventListener('click', (e) => {
                lists = new Array();
                renderList();
                console.log(e);
            });

            function renderList() {
                $ul.innerHTML = lists
                    .map((list, i) => {
                        return `<li key='${i}' class="liclass">${list} <button type="button" onclick='updatedhandling(this)' class="updateBtn">수정</button>
                <button onclick='deleteList(${i})' type="button" class="deleteBtn">삭제</button></li>`;
                    })
                    .join('');
            }
            updatedhandling = (e) => {
                const temp = e.parentElement.innerHTML;
                const targetId = e.parentElement.getAttribute('key');
                e.parentElement.innerHTML = `<input type='text' id='updateTarget'> <input onclick='updated(${targetId})' type='button' value='확인'> <input onclick='returned()' type='button' value='취소'>`;

                updated = (targetId) => {
                    const target = document.querySelector('#updateTarget');
                    lists = lists.map((list, i) => {
                        return i === targetId ? (list = target.value) : list;
                    });
                    renderList();
                };

                returned = () => {
                    renderList();
                };
            };

            deleteList = (e) => {
                lists = lists.filter((list, i) => i !== e);
                renderList();
            };

            updateList = (updateList, updatemsg) => {
                let deleteList = lists.find((list) => list.id === updateList);
                deleteList = updatemsg;
                renderList();
            };

            // 6.추가된 내용을 "각 각" 수정 및 삭제 수 있게 변경하시오.
        </script>
    </body>
</html>
